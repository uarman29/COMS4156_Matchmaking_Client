<div class="px-5 pb-5">
  <h1 class="text-center">Game Details</h1>
  <form [formGroup] = "gameForm">
      <div class="row game-form-group mb-3">
          <div class="col-md-4 game-form-control">
              <label for="game_name" class="form-label">Name</label>
              <input type="text" class="form-control" formControlName = "game_name" name="game_name" required>
          </div>

          <div class="col-md-4 game-form-control">
              <label for="category" class="form-label">Category</label>
              <input type="text" class="form-control" formControlName = "category" name="category" required>
          </div>

          <div class="col-md-2 game-form-control">
              <label for="players_per_team" class="form-label">Players Per Team</label>
              <input type="number" class="form-control" formControlName = "players_per_team" name="players_per_team" min="1" step="1" required>
          </div>

          <div class="col-md-2 game-form-control">
              <label for="teams_per_match" class="form-label">Teams Per Match</label>
              <input type="number" class="form-control" formControlName = "teams_per_match" name="teams_per_match" min="1" step="1" required>
          </div>

      </div>

      <div class="row game-form-group mb-3">
          <div class="col-md-3 game-form-control">
              <label for="game_parameter1_name" class="form-label">Parameter 1 Name</label>
              <input type="text" class="form-control" formControlName = "game_parameter1_name" name="game_parameter1_name">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter1_weight" class="form-label">Parameter 1 Weight</label>
              <input type="number" class="form-control" formControlName = "game_parameter1_weight" name="game_parameter1_weight">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter2_name" class="form-label">Parameter 2 Name</label>
              <input type="text" class="form-control" formControlName = "game_parameter2_name" name="game_parameter2_name">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter2_weight" class="form-label">Parameter 2 Weight</label>
              <input type="number" class="form-control" formControlName = "game_parameter2_weight" name="game_parameter2_weight">
          </div>
      </div>

      <div class="row game-form-group mb-3">
          <div class="col-md-3 game-form-control">
              <label for="game_parameter3_name" class="form-label">Parameter 3 Name</label>
              <input type="text" class="form-control" formControlName = "game_parameter3_name" name="game_parameter3_name">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter3_weight" class="form-label">Parameter 3 Weight</label>
              <input type="number" class="form-control" formControlName = "game_parameter3_weight" name="game_parameter3_weight">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter4_name" class="form-label">Parameter 4 Name</label>
              <input type="text" class="form-control" formControlName = "game_parameter4_name" name="game_parameter4_name">
          </div>

          <div class="col-md-3 game-form-control">
              <label for="game_parameter4_weight" class="form-label">Parameter 4 Weight</label>
              <input type="number" class="form-control" formControlName = "game_parameter4_weight" name="game_parameter4_weight">
          </div>
      </div>

      <div class="d-flex flex-row justify-content-center">
          <button class="btn btn-secondary m-1" [disabled]="!gameForm.valid" (click)="onUpdate()">Update</button>
          <button type="button" class="btn btn-danger m-1" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
      </div>

    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="deleteModalLabel">Are you sure?</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Are you sure you want to delete this game?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="onDelete()">Yes</button>
          </div>
        </div>
      </div>
    </div>
  </form>

  <div>
      <h3>Player Ratings</h3>
      <form [formGroup] = "ratingsForm">
          <div class="row order-form-group mb-3">
              <div class="col-md-2">
                  <label for="player_email" class="form-label">Player Email</label>
                  <input type="text" class="form-control" formControlName = "player_email" required>
              </div>

              <div class="col-md-2">
                <label for="game_parameter1_value" class="form-label">Parameter 1 Value</label>
                <input type="number" class="form-control" formControlName = "game_parameter1_value">
              </div>

              <div class="col-md-2">
                <label for="game_parameter2_value" class="form-label">Parameter 2 Value</label>
                <input type="number" class="form-control" formControlName = "game_parameter2_value">
              </div>

              <div class="col-md-2">
                <label for="game_parameter3_value" class="form-label">Parameter 3 Value</label>
                <input type="number" class="form-control" formControlName = "game_parameter3_value">
              </div>

              <div class="col-md-2">
                <label for="game_parameter4_value" class="form-label">Parameter 4 Value</label>
                <input type="number" class="form-control" formControlName = "game_parameter4_value">
              </div>

              <div class="col-md-2 order-item-form-control text-center d-flex flex-column justify-content-end">
                  <button type="button" class="btn btn-primary" [disabled]="!ratingsForm.valid" (click)="addRating()">Add Rating</button>
              </div>
          </div>
        <ng-container formArrayName="current_ratings">
          <ng-container *ngFor="let ratingForm of current_ratings.controls; let i = index">
            <div class="rating-form-row" [formGroupName]="i">
              <div class="row mb-3">
                <div class="col-md-2">
                    <label for="player_email" class="form-label">Player Email</label>
                    <input type="text" class="form-control" formControlName = "player_email" required [attr.disabled]="true">
                </div>

                <div class="col-md-2">
                  <label for="game_parameter1_value" class="form-label">Parameter 1 Value</label>
                  <input type="number" class="form-control" formControlName = "game_parameter1_value">
                </div>

                <div class="col-md-2">
                  <label for="game_parameter2_value" class="form-label">Parameter 2 Value</label>
                  <input type="number" class="form-control" formControlName = "game_parameter2_value">
                </div>

                <div class="col-md-2">
                  <label for="game_parameter3_value" class="form-label">Parameter 3 Value</label>
                  <input type="number" class="form-control" formControlName = "game_parameter3_value">
                </div>

                <div class="col-md-2">
                  <label for="game_parameter4_value" class="form-label">Parameter 4 Value</label>
                  <input type="number" class="form-control" formControlName = "game_parameter4_value">
                </div>
        
                <div class="col-md-1 text-center d-flex flex-column justify-content-end">
                  <button type="button" class="btn btn-secondary" [disabled]="!ratingForm.valid" (click)="updateRating(i)">Update</button>
                </div>

                <div class="col-md-1 text-center d-flex flex-column justify-content-end">
                  <button type="button" class="btn btn-warning" [disabled]="!ratingForm.valid" (click)="deleteRating(i)">Delete</button>
                </div>
              </div>
            </div>
          </ng-container>
        </ng-container>
      </form>
  </div>

  <div class="mt-5 mb-5">
      <h1>Matchmake</h1>
      <form [formGroup] = "matchmakingForm">
          <label for="player_emails" class="form-label">Player Emails</label>
          <textarea class="form-control" formControlName = "player_emails" required></textarea>
          <div class="mt-2 d-block d-flex flex-row justify-content-end">
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" formControlName="matchmakingType" name="matchmakingType" id="matchmakingBasic" value="basic" checked>
              <label class="form-check-label" for="matchmakingBasic">
                Basic
              </label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" formControlName="matchmakingType" name="matchmakingType" id="matchmakingAdvanced" value="advanced">
              <label class="form-check-label" for="matchmakingAdvanced">
                Advanced
              </label>
            </div>
          </div>
          <div class="mt-2">
            <button type="button" class="btn btn-primary float-end" [disabled]="!matchmakingForm.valid" (click)="matchmake()">Matchmake</button>
          </div>
      </form>
      <div class="mt-5">
        <h1>Matchmaking Results</h1>
        <div>
          <pre>{{matchMakingResult | json}}</pre>
        </div>
      </div>
  </div>

</div>